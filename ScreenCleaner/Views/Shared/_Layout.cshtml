<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>@ViewBag.Title - ScreenCleaner</title>
        <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
        <meta name="viewport" content="width=device-width" />
        @Styles.Render("~/Content/css")
        @Scripts.Render("~/bundles/modernizr")
    </head>
    <body>
        <div id="specialstuff">
            <span id="fsstatus"></span>
            
            <div class="visibleNormal">
                <h1> Clean Your Screen!!</h1>
                
                <img src="http://www.onbile.com/info/wp-content/uploads/2011/12/clean-touch-screen-586x439.jpg"/>

                <input type="button" value="Start Cleaning" id="fsbutton">            
            </div>

            @RenderBody()
        </div>
        @Scripts.Render("~/bundles/jquery")
        @RenderSection("scripts", required: false)
        <script>

            /* 
            Native FullScreen JavaScript API
            -------------
            Assumes Mozilla naming conventions instead of W3C for now
            */

            (function () {
                var
                    fullScreenApi = {
                        supportsFullScreen: false,
                        isFullScreen: function () { return false; },
                        requestFullScreen: function () { },
                        cancelFullScreen: function () { },
                        fullScreenEventName: '',
                        prefix: ''
                    },
                    browserPrefixes = 'webkit moz o ms khtml'.split(' ');

                // check for native support
                if (typeof document.cancelFullScreen != 'undefined') {
                    fullScreenApi.supportsFullScreen = true;
                } else {
                    // check for fullscreen support by vendor prefix
                    for (var i = 0, il = browserPrefixes.length; i < il; i++) {
                        fullScreenApi.prefix = browserPrefixes[i];

                        if (typeof document[fullScreenApi.prefix + 'CancelFullScreen'] != 'undefined') {
                            fullScreenApi.supportsFullScreen = true;

                            break;
                        }
                    }
                }

                // update methods to do something useful
                if (fullScreenApi.supportsFullScreen) {
                    fullScreenApi.fullScreenEventName = fullScreenApi.prefix + 'fullscreenchange';

                    fullScreenApi.isFullScreen = function () {
                        switch (this.prefix) {
                        case '':
                            return document.fullScreen;
                        case 'webkit':
                            return document.webkitIsFullScreen;
                        default:
                            return document[this.prefix + 'FullScreen'];
                        }
                    }
                    fullScreenApi.requestFullScreen = function (el) {
                        return (this.prefix === '') ? el.requestFullScreen() : el[this.prefix + 'RequestFullScreen']();
                    }
                    fullScreenApi.cancelFullScreen = function (el) {
                        return (this.prefix === '') ? document.cancelFullScreen() : document[this.prefix + 'CancelFullScreen']();
                    }
                }

                // jQuery plugin
                if (typeof jQuery != 'undefined') {
                    jQuery.fn.requestFullScreen = function () {

                        return this.each(function () {
                            var el = jQuery(this);
                            if (fullScreenApi.supportsFullScreen) {
                                fullScreenApi.requestFullScreen(el);
                            }
                        });
                    };
                }

                // export api
                window.fullScreenApi = fullScreenApi;
            })();

        </script>
        
        <script>

            // do something interesting with fullscreen support
            var fsButton = document.getElementById('fsbutton'),
                fsElement = document.getElementById('specialstuff'),
                fsStatus = document.getElementById('fsstatus');


            if (window.fullScreenApi.supportsFullScreen) {
                // handle button click
                fsButton.addEventListener('click', function () {
                    window.fullScreenApi.requestFullScreen(fsElement);
                }, true);

                fsElement.addEventListener(fullScreenApi.fullScreenEventName, function () {
                    if (fullScreenApi.isFullScreen()) {
                        fsStatus.innerHTML = 'You can now start cleaning your screen. Press Esc to exit';
                        $('.visibleNormal').hide();
                    } else {
                        $('.visibleNormal').show();
                        fsStatus.innerHTML = '';
                    }
                }, true);

            } else {
                fsStatus.innerHTML = 'SORRY: Your browser does not support FullScreen';
            }

        </script>

    </body>
</html>
